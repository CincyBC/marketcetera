<?xml version="1.0" encoding="UTF-8" ?>
<model>
  <modelEntities>
    <modelEntity name="StrategyInstance" description="Identifies a unique strategy instance" pojoProject="strategy/strategy-core" apiProject="strategy/strategy-api" persistentProject="strategy/strategy-server" 
                 packageName="org.marketcetera.strategy" hasInterfaceProject="strategy/strategy-api" apiExtends="org.marketcetera.admin.HasUser">
      <authors>
        <author>&lt;a href="mailto:colin@marketcetera.com"&gt;Colin DuPlantis&lt;/a&gt;</author>
      </authors>
      <modelEntityAttributes>
        <modelEntityAttribute name="user" description="user which owns this strategy" type="org.marketcetera.admin.User" useGetters="true" useSetters="true" interfaceProvided="true"/>
        <modelEntityAttribute name="name" description="uniquely describes the strategy" type="String" useGetters="true" useSetters="true" interfaceProvided="false"/>
      </modelEntityAttributes>
    </modelEntity>
  </modelEntities>
  <rpcEntities>
    <rpcEntity project="strategy/strategy-rpc-core" protoPrefix="strategy_types" javaPackage="org.marketcetera.strategy" javaClassName="StrategyTypesRpc" utilName="Strategy">
      <imports>
        <import>rpc_base.proto</import>
        <import>rpc_admin.proto</import>
        <import>google/protobuf/timestamp.proto</import>
      </imports>
      <authors>
        <author>&lt;a href="mailto:colin@marketcetera.com"&gt;Colin DuPlantis&lt;/a&gt;</author>
      </authors>
      <rpcMessages>
        <rpcMessage name="StrategyInstance" description="describes a loaded strategy" javaType="org.marketcetera.strategy.StrategyInstance"
                    primaryFactory="org.marketcetera.strategy.StrategyInstanceFactory" factories="org.marketcetera.admin.UserFactory">
          <rpcMessageAttributes>
            <rpcMessageAttribute name="user" type="User" description="user that owns the strategy" factories="org.marketcetera.admin.UserFactory" rpcConverter="org.marketcetera.admin.rpc.AdminRpcUtil.getRpcUser" javaConverter="org.marketcetera.admin.rpc.AdminRpcUtil.getUser"/>
            <rpcMessageAttribute name="name" type="string" description="uniquely describes the strategy"/>
          </rpcMessageAttributes>
        </rpcMessage>
      </rpcMessages>
    </rpcEntity>
    <rpcEntity project="strategy/strategy-rpc-core" protoPrefix="strategy" javaPackage="org.marketcetera.strategy" javaClassName="StrategyRpc" serverProject="strategy/strategy-rpc-server" apiProject="strategy/strategy-api">
      <imports>
        <import>rpc_base.proto</import>
        <import>rpc_paging.proto</import>
        <import>rpc_strategy_types.proto</import>
      </imports>
      <authors>
        <author>&lt;a href="mailto:colin@marketcetera.com"&gt;Colin DuPlantis&lt;/a&gt;</author>
      </authors>
      <autowiredServices>
        <autowiredService type="org.marketcetera.admin.service.AuthorizationService" name="authzService" description="provides access to authorization services"/>
      </autowiredServices>
      <rpcMessages>
        <rpcMessage name="ReadStrategyInstancesRequest" description="request the loaded strategy instances">
          <rpcMessageAttributes>
            <rpcMessageAttribute name="sessionId" type="string" description="session id of the authenticated session"/>
          </rpcMessageAttributes>
        </rpcMessage>
        <rpcMessage name="ReadStrategyInstancesResponse" description="return the loaded strategy instances">
          <rpcMessageAttributes>
            <rpcMessageAttribute name="pageResponse" type="PageResponse"/>
            <rpcMessageAttribute name="strategyInstances" type="StrategyInstance" repeated="true"/>
          </rpcMessageAttributes>
        </rpcMessage>
      </rpcMessages>
      <rpcService name="StrategyRpcService" description="services for Strategy">
        <rpcServiceEntries>
          <rpcServiceEntry name="login" description="starts the session" paramType="LoginRequest" returnType="LoginResponse"/>
          <rpcServiceEntry name="logout" description="ends the session" paramType="LogoutRequest" returnType="LogoutResponse"/>
          <rpcServiceEntry name="heartbeat" description="keeps the session alive" paramType="HeartbeatRequest" returnType="HeartbeatResponse"/>
          <rpcServiceEntry name="getStrategyInstances" description="requests loaded strategy instances" paramType="ReadStrategyInstancesRequest" returnType="ReadStrategyInstancesResponse" paged="false" serviceReturnType="java.util.Collection&lt;org.marketcetera.strategy.StrategyInstance&gt;">
            <rpcMessageAttributes>
            </rpcMessageAttributes>
            <requiredPermissions>
              <requiredPermission>ReadStrategiesPermission</requiredPermission>
              <requiredPermission>LoadStrategyPermission</requiredPermission>
              <requiredPermission>UnloadStrategyPermission</requiredPermission>
              <requiredPermission>StartStrategyPermission</requiredPermission>
              <requiredPermission>StopStrategyPermission</requiredPermission>
            </requiredPermissions>
          </rpcServiceEntry>
        </rpcServiceEntries>
      </rpcService>
    </rpcEntity>
  </rpcEntities>
</model>
